# =============================================================================
# SVAZ.APP ENVIRONMENT CONFIGURATION
# =============================================================================
# Copy this file to .env and fill in your values
# This file contains all environment variables for the docker-compose stack
# =============================================================================

# -----------------------------------------------------------------------------
# DOMAIN CONFIGURATION
# -----------------------------------------------------------------------------
# Your domain name (e.g., svaz.app)
DOMAIN=svaz.app

# Email for Let's Encrypt SSL certificates
SSL_EMAIL=admin@svaz.app

# -----------------------------------------------------------------------------
# DATABASE (PostgreSQL)
# -----------------------------------------------------------------------------
POSTGRES_USER=svazapp
POSTGRES_PASSWORD=change_this_secure_password
POSTGRES_DB=svazapp
DATABASE_URL=postgresql://${POSTGRES_USER}:${POSTGRES_PASSWORD}@db:5432/${POSTGRES_DB}

# -----------------------------------------------------------------------------
# API SERVICE
# -----------------------------------------------------------------------------
# Node environment (development, production)
NODE_ENV=production

# API port (internal, not exposed)
API_PORT=8080

# JWT secret for authentication (generate a strong random string)
JWT_SECRET=change_this_to_a_very_long_random_string_min_32_chars

# JWT expiration time (90 days for long-term sessions)
JWT_EXPIRES_IN=90d

# CORS origin (your domain)
CORS_ORIGIN=https://${DOMAIN}

# -----------------------------------------------------------------------------
# LIVEKIT (SFU Server)
# -----------------------------------------------------------------------------
# LiveKit API key (generate random string)
LIVEKIT_API_KEY=APIxxxxxxxxxxxxxxxx

# LiveKit API secret (generate random string)
LIVEKIT_API_SECRET=change_this_to_a_very_long_random_secret

# LiveKit server URL (internal docker network)
LIVEKIT_URL=ws://livekit:7880

# LiveKit public URL (accessible from frontend)
LIVEKIT_PUBLIC_URL=wss://${DOMAIN}/livekit

# -----------------------------------------------------------------------------
# COTURN (STUN/TURN Server)
# -----------------------------------------------------------------------------
# CoTURN realm
COTURN_REALM=${DOMAIN}

# CoTURN username
COTURN_USER=svazuser

# CoTURN password (generate strong password)
COTURN_PASSWORD=change_this_secure_coturn_password

# CoTURN listening port
COTURN_LISTENING_PORT=3478

# CoTURN TLS listening port
COTURN_TLS_LISTENING_PORT=5349

# CoTURN min/max port range for relay
COTURN_MIN_PORT=49152
COTURN_MAX_PORT=65535

# -----------------------------------------------------------------------------
# FRONTEND (Next.js PWA)
# -----------------------------------------------------------------------------
# Frontend port (internal, not exposed)
FRONTEND_PORT=3000

# API URL for frontend (internal docker network)
NEXT_PUBLIC_API_URL=https://${DOMAIN}/api

# Socket.io URL
NEXT_PUBLIC_SOCKET_URL=https://${DOMAIN}

# LiveKit URL for frontend
NEXT_PUBLIC_LIVEKIT_URL=wss://${DOMAIN}/livekit

# STUN/TURN servers (public URL)
NEXT_PUBLIC_STUN_URL=stun:${DOMAIN}:3478
NEXT_PUBLIC_TURN_URL=turn:${DOMAIN}:3478

# WebTorrent trackers (public trackers for P2P)
NEXT_PUBLIC_WEBTORRENT_TRACKERS=wss://tracker.openwebtorrent.com,wss://tracker.btorrent.xyz

# -----------------------------------------------------------------------------
# CADDY (Reverse Proxy)
# -----------------------------------------------------------------------------
# Caddy admin API port (internal)
CADDY_ADMIN_PORT=2019

# -----------------------------------------------------------------------------
# SECURITY
# -----------------------------------------------------------------------------
# Rate limiting
RATE_LIMIT_MAX=100
RATE_LIMIT_WINDOW=15m

# Session secret
SESSION_SECRET=change_this_to_another_very_long_random_string

# -----------------------------------------------------------------------------
# LOGGING
# -----------------------------------------------------------------------------
LOG_LEVEL=info

